# Содержание
- [Содержание](#содержание)
  - [Описание](#описание)
  - [Требования для работы](#требования-для-работы)
  - [Зависимости Python](#зависимости-python)
  - [Структура .env файлов](#структура-env-файлов)
  - [Docker](#docker)
  - [Тестирование](#тестирование)

## Описание
Сайт разрабатывался для курсового проекта по теме «Информационная система учета сделок агентства недвижимости».

## Требования для работы
- **Python** ~=3.12.0
- **PostgreSQL** ~=17.2

## Зависимости Python
Все зависимости для Python написаны в `pyproject.toml`, для установки перейти в директорию к этому файлу и написать:
```sh
pip install -e .
```

## Структура .env файлов
Основой является файл конфигурации `.env.init` в корне проекта, он должен в любом случае существовать. Он служит только для того, чтобы указать путь к основному env-файлу.
Сам файл `.env.init` может быть пустым, но важно, чтобы до запуска сайта это основное окружение было создано.

Он имеет следующую структуру:
```env
LOAD_MAIN_ENV="envs/.env.example"  # Path to main env running (Optional)
```

Основной файл окружения должен иметь в свою очередь, следующую структуру: 
```env
# Metadata
MOD="TEST"                                 # Choice from: "DEV", "TEST" and "PROD"
# PostgreSQL
NAME_DB="example"
USER_DB="example"
PASSWORD_DB="example"
HOST_DB="127.0.0.1"
PORT_DB="5432"
# Email
EMAIL_HOST_USER="example@gmail.com"
EMAIL_HOST_PASSWORD="ffff ffff ffff ffff" 
# Server
MAIN_HOST="127.0.0.1:8000"                 # Included in ALLOWED_HOSTS (Example: "https://example-host.com")
```

P.S.
Переменная `DEBUG=True` **больше не связана** с тем какое окружение загружается и окружение на нее так же не влияет!
Рекомендуется хранить все env файлы в папке `envs/`.

## Docker
Для сборки Docker-образа выполните:
```sh
docker build -t real-estate-agency-deals-site .
```
При этом основной env-файл не попадает в образ, а значит при запуске контейнера необходимо его передать!

Запуска информационной системы рекомендуется через `docker-compose.yaml`.
При этом передайте env-файл, соответствующий структуре файла основного окружения так же как с Docker-образом!

Для запуска Docker Compose выполните:
```sh
docker compose --env-file envs/.env.example up
```

P.S. 
**Важно**, текущий `docker-compose.yaml` подходит только для запуска в режиме тестирования или разработки и не более!

## Тестирование
По большей части проект тестировался вручную, но теперь появились автотесты с использованием `PyTest` и `Selenium`.
Для их работы нужно подготовить тестовое окружение, после чего можно будет запустить:
```sh
pytest
```

<pre>
---------------[meow]---------------
───▐▀▄──────▄▀▌───▄▄▄▄▄▄▄─────────── 
───▌▒▒▀▄▄▄▄▀▒▒▐▄▀▀▒██▒██▒▀▀▄──────── 
──▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▀▄────── 
──▌▒▒▒▒▒▒▒▒▒▒▒▒▒▄▒▒▒▒▒▒▒▒▒▒▒▒▒▀▄──── 
▀█▒▒█▌▒▒█▒▒▐█▒▒▀▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▌─── 
▀▌▒▒▒▒▒▀▒▀▒▒▒▒▒▀▀▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▐─▄▄ 
▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▄█▒█ 
▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█▀──── 
──▐▄▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▄▌──── 
────▀▄▄▀▀▀▀▄▄▀▀▀▀▀▀▄▄▀▀▀▀▀▀▄▄▀────── 
</pre>
