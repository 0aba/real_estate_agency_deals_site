# Описание
Сайт разрабатывался для курсового проекта по теме «Информационная система учета сделок агентства недвижимости».

## Содержание
- [Описание](#описание)
  - [Содержание](#содержание)
  - [Требования для работы](#требования-для-работы)
  - [Зависимости Python](#зависимости-python)
  - [Структура .env файлов](#структура-env-файлов)
  - [Docker](#docker)

## Требования для работы
- **Python** ~=3.13.0
- **PostgreSQL** ~=17.2

## Зависимости Python
Все зависимости для Python написаны в `pyproject.toml`, для установки перейти в директорию к этому файлу и написать:
```sh
pip install -e .
```

## Структура .env файлов
Основной файл конфигурации `.env.init` в корне проекта. Он содержит опционально метаданные проекта, определяет тип запуска и путь к основному env файлу.

Он имеет следующую структуру:
```env
ALSO_LOAD_ENV="envs/.env.example"  # Path to main env running

MOD="TEST"                         # Choice running mod from: "DEV", "TEST" and "PROD"
```

Основной файл окружения должен иметь в свою очередь следующую структуру вне зависимости от переменных в `.env.init`: 
```env
# PostgreSQL
NAME_DB="example"
USER_DB="example"
PASSWORD_DB="example"
HOST_DB="127.0.0.1"                        # Default PostgreSQL
PORT_DB="5432"                             # Default PostgreSQL
# Email
EMAIL_HOST_USER="example@gmail.com"
EMAIL_HOST_PASSWORD="ffff ffff ffff ffff" 
# Server
MAIN_HOST='https://example-host.com'       # Optional (default 127.0.0.1:8000)
```

P.S.
Переменная `DEBUG=True` **больше не связана** с тем какое окружение загружается и окружение на нее так же не влияет!
Рекомендуется хранить все env файлы в папке `envs/`.


## Docker
Для сборки Docker-образа написать:
```sh
docker build -t real-estate-agency-deals-site .
```
При этом env-файлы также попадают в образ. Сборка образа обязательна для `docker-compose.yaml`, автосборки в нем нет!

Для запуска информационной системы используйте `docker-compose.yaml`.
При запуске Docker Compose необходимо передать env-файл, который был указан по пути в `.env.init` при сборке.
Для запуска Docker Compose информационной системы сначала соберите Docker-образ, затем из корневого каталога выполните:
```sh
docker compose --env-file envs/.env.example up
```

P.S. 
**Важно**, текущий `docker-compose.yaml` подходит только для запуска в режиме тестирования или разработки и не более!
Конфигурация сделана очень криво, и проблема усугубилась после изменений в логике работы с env.

<pre>
---------------[meow]---------------
───▐▀▄──────▄▀▌───▄▄▄▄▄▄▄─────────── 
───▌▒▒▀▄▄▄▄▀▒▒▐▄▀▀▒██▒██▒▀▀▄──────── 
──▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▀▄────── 
──▌▒▒▒▒▒▒▒▒▒▒▒▒▒▄▒▒▒▒▒▒▒▒▒▒▒▒▒▀▄──── 
▀█▒▒█▌▒▒█▒▒▐█▒▒▀▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▌─── 
▀▌▒▒▒▒▒▀▒▀▒▒▒▒▒▀▀▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▐─▄▄ 
▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▄█▒█ 
▐▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█▀──── 
──▐▄▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▄▌──── 
────▀▄▄▀▀▀▀▄▄▀▀▀▀▀▀▄▄▀▀▀▀▀▀▄▄▀────── 
</pre>
